// ========================================
// é›†æˆåŒ…ç®¡ç†å™¨æµ‹è¯•æ¼”ç¤º
// Integrated Package Manager Demo
// ========================================

// å¯¼å…¥æ ‡å‡†åº“
>> "io/console"
>> "math/math"

// å¯¼å…¥è¿œç¨‹ä¾èµ–ï¼ˆåŒ…ç®¡ç†å™¨ä¼šè‡ªåŠ¨ä¸‹è½½ï¼‰
// Import remote dependencies (package manager will auto-download)
>> "github.com/polyglot-community/http-client"
>> "github.com/polyglot-community/json-parser"
>> "gitlab.com/polyglot-libs/math-utils"

main() {
    println("ğŸš€ Polygloté›†æˆåŒ…ç®¡ç†å™¨æµ‹è¯•")
    println("=====================================")

    test_local_libraries()
    test_remote_dependencies()
    test_math_calculations()

    println("âœ… æ‰€æœ‰æµ‹è¯•å®Œæˆï¼")
    <- 0
}

// æµ‹è¯•æœ¬åœ°æ ‡å‡†åº“
test_local_libraries() {
    println("\nğŸ“š æµ‹è¯•æœ¬åœ°æ ‡å‡†åº“...")

    numbers := [1, 2, 3, 4, 5]
    println("æ•°ç»„: " + to_string(numbers))

    sum := 0
    ^(num in numbers) {
        sum += num
    }
    println("æ•°ç»„å’Œ: " + to_string(sum))
}

// æµ‹è¯•è¿œç¨‹ä¾èµ–ï¼ˆæ¨¡æ‹Ÿï¼‰
test_remote_dependencies() {
    println("\nğŸ“¦ æµ‹è¯•è¿œç¨‹ä¾èµ–...")

    // æ³¨æ„ï¼šè¿™äº›ä¾èµ–åœ¨çœŸå®ç¯å¢ƒä¸­éœ€è¦å®é™…å­˜åœ¨
    // è¿™é‡Œä»…ä½œä¸ºè¯­æ³•æ¼”ç¤º

    println("ğŸ“¡ æ¨¡æ‹ŸHTTPå®¢æˆ·ç«¯...")
    // client := HttpClient()
    // response := client.get("https://api.example.com")
    println("âœ… HTTPå®¢æˆ·ç«¯åº“åŠ è½½æˆåŠŸï¼ˆæ¨¡æ‹Ÿï¼‰")

    println("ğŸ“ æ¨¡æ‹ŸJSONè§£æå™¨...")
    // json_data := JsonParser::parse("{\"test\": \"value\"}")
    println("âœ… JSONè§£æå™¨åº“åŠ è½½æˆåŠŸï¼ˆæ¨¡æ‹Ÿï¼‰")

    println("ğŸ§® æ¨¡æ‹Ÿæ•°å­¦å·¥å…·åº“...")
    // result := MathUtils::calculate_fibonacci(10)
    println("âœ… æ•°å­¦å·¥å…·åº“åŠ è½½æˆåŠŸï¼ˆæ¨¡æ‹Ÿï¼‰")
}

// æµ‹è¯•æ•°å­¦è®¡ç®—
test_math_calculations() {
    println("\nğŸ§® æµ‹è¯•æ•°å­¦è®¡ç®—...")

    pi := 3.14159
    radius := 5.0
    area := pi * radius * radius

    println("åœ†å‘¨ç‡: " + to_string(pi))
    println("åŠå¾„: " + to_string(radius))
    println("é¢ç§¯: " + to_string(area))

    // æµ‹è¯•æ›´å¤æ‚çš„è®¡ç®—
    base := 2.0
    exponent := 10
    power_result := 1.0

    i := 0
    ^(i < exponent) {
        power_result *= base
        i += 1
    }

    println(to_string(base) + "çš„" + to_string(exponent) + "æ¬¡æ–¹: " + to_string(power_result))
}

// æ¼”ç¤ºé”™è¯¯å¤„ç†
handle_dependency_errors() {
    println("\nâš ï¸ ä¾èµ–é”™è¯¯å¤„ç†æ¼”ç¤º...")

    // æ¨¡æ‹Ÿä¾èµ–ä¸å¯ç”¨çš„æƒ…å†µ
    dependency_available := false

    (dependency_available) ? {
        println("âœ… ä½¿ç”¨é«˜çº§ç¬¬ä¸‰æ–¹åŠŸèƒ½")
    } : {
        println("âš¡ ä¾èµ–ä¸å¯ç”¨ï¼Œä½¿ç”¨å†…ç½®å®ç°")
        use_fallback_implementation()
    }
}

use_fallback_implementation() {
    println("ä½¿ç”¨å†…ç½®çš„åŸºç¡€åŠŸèƒ½ä½œä¸ºåå¤‡æ–¹æ¡ˆ")
}