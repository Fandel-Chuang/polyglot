# 协作规范（Collaboration Rules）

本目录用于记录本仓库的协作约定与流程，确保多角色（含多智能体）协作顺畅、有据可依。

## 1. 目录与命名约定
- 自动化测试/金样测试/
  - 用例/〈中文用例名〉/（仅中文命名）
    - input.pg 或 input.文达（二选一）
    - expected.out（主规范；兼容 expected.txt）
    - expected.exit（可选）
  - 报告/（自动生成，非版本控制内容；CI 工件会上传）
  - 运行金样测试.py（金样测试驱动）
- tests/golden/：过渡期仅兼容读取，不再新增写入，拟 T+7 天下线。

## 2. 工作决定（Decision）
- 工作决定由“你或主程序”创建，命名：工作决定_*.md。
- GPT5 阅读并执行后，统一归档至：人工智能协作/工作决定历史/。
- 仅归档已阅读/已执行的决定；顶层保留当前有效决定。

## 3. PR 门槛与流程
- PR 必须通过持续集成（CI:Continuous Integration）。
- 若涉及中文语法/符号/示例，必须通过金样测试（自动化测试/金样测试）。
- 使用 .github/pull_request_template.md，勾选“中文样例通过金样测试”。
- 建议使用 Squash 合并。

## 4. CI 与报告
- GitHub Actions（Debian + Windows）运行金样测试，失败时把 diff/error 与 summary.json 作为工件上传（保留 7 天）。
- 自动化测试/金样测试/报告/ 为自动生成，已加入 .gitignore，不纳入版本控制。

## 5. 角色分工
- 主程序（Sonnet）：编译器核心与 Windows 兼容；中文可执行名/路径/编码等由其负责。
- GPT5（Infra/QA/Tooling）：CLI、CI、金样测试、规范与流程。

（本规范持续迭代）
