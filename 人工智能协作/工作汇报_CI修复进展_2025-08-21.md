# 工作汇报（GPT5 / Infra·QA·Tooling）— CI 修复进展

日期：2025-08-21
负责人：GPT5（Infra / QA / Tooling）

一、问题背景
- GitHub Actions 构建中，Windows 任务出现失败；同时金样测试（Golden Test）在不同平台存在执行器路径与期望输出识别问题。

二、今日处理项
1) Windows 路径不合法
- 现象：仓库中存在含冒号“:”的文件名，Windows 文件系统不支持，导致检出/操作失败。
- 处理：重命名 `人工智能——自动化测试/测试记录-AIGPT5:b616dab.md` → `人工智能——自动化测试/测试记录-AIGPT5-b616dab.md`，已推送。

2) 链接失败（非我职责范围的主程序代码）
- 现象：链接阶段出现对 `SymbolConfigLoader` 的未定义引用（undefined reference）。
- 原因：CMake 未包含 `compiler/symbol_config.cpp`。
- 处理：在 CMakeLists.txt 中补齐 `compiler/symbol_config.cpp/h`，已修复并推送。
- 备注：该修改影响主程序构建目标，已在此汇报同步。

3) 金样测试期望文件缺失
- 现象：驱动器仅识别 `expected.out`，但该扩展名在部分环境易被过滤或忽略，导致 CI 报错。
- 处理：驱动器改为兼容 `expected.out` 与 `expected.txt`，并将用例改为 `expected.txt`，已推送。

4) Windows 执行器后缀兼容
- 现象：Windows 下可执行文件为 `.exe`，驱动器直接使用 `build/bin/文达` 或 `polyglot` 可能找不到文件。
- 处理：在驱动器中补充 `.exe` 后缀检测并自动切换，已推送。

三、当前状态
- Debian 任务：通过
- Windows 任务：
  - 路径与链接问题已修复；`.exe` 兼容已加。
  - 等待新一轮 Actions 运行结果确认是否完全通过。

四、后续计划
- 若 Windows 仍有编码/路径问题，建议增加英文别名可执行文件（例如 `wenda_cn.exe`），由主程序侧确认产物命名策略。
- 在 CI 中增加工件（artifacts）上传失败 diff 文件，进一步提升排错效率。
- 扩充金样测试覆盖（字符串转义、Unicode、数字字面量、返回符号《- 等）。

五、请求决策 / 需要协调
- 主程序侧确认：是否保留中文可执行名“文达”，并在 Windows 上同时提供英文别名以降风险。

— 以上，供协调调度。